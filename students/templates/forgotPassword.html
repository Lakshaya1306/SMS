{% extends "UserBase.html" %}
{% load static %}

   {% block title %} Forgot Password {% endblock %}
   {% block bodyClass %} login-page vsc-initialized {% endblock %}
    {% block js %}
    <script
      defer=""
      referrerpolicy="origin"
      src="/cdn-cgi/zaraz/s.js?z=JTdCJTIyZXhlY3V0ZWQlMjIlM0ElNUIlNUQlMkMlMjJ0JTIyJTNBJTIyQWRtaW5MVEUlMjAzJTIwJTdDJTIwRm9yZ290JTIwUGFzc3dvcmQlMjIlMkMlMjJ4JTIyJTNBMC4xMzA1NDczMDE5NTkyMTcxNSUyQyUyMnclMjIlM0ExNTM2JTJDJTIyaCUyMiUzQTg2NCUyQyUyMmolMjIlM0E0MTAlMkMlMjJlJTIyJTNBMTUzNiUyQyUyMmwlMjIlM0ElMjJodHRwcyUzQSUyRiUyRmFkbWlubHRlLmlvJTJGdGhlbWVzJTJGdjMlMkZwYWdlcyUyRmV4YW1wbGVzJTJGZm9yZ290LXBhc3N3b3JkLmh0bWwlMjIlMkMlMjJyJTIyJTNBJTIyaHR0cHMlM0ElMkYlMkZhZG1pbmx0ZS5pbyUyRnRoZW1lcyUyRnYzJTJGJTIyJTJDJTIyayUyMiUzQTI0JTJDJTIybiUyMiUzQSUyMlVURi04JTIyJTJDJTIybyUyMiUzQS0zMzAlMkMlMjJxJTIyJTNBJTVCJTVEJTdE"
    ></script>
    <script data-cfasync="false" nonce="06c5b6cb-91f4-407c-8030-62944da1011e">
      try {
        (function (w, d) {
          !(function (fv, fw, fx, fy) {
            if (fv.zaraz) console.error("zaraz is loaded twice");
            else {
              fv[fx] = fv[fx] || {};
              fv[fx].executed = [];
              fv.zaraz = { deferred: [], listeners: [] };
              fv.zaraz._v = "5858";
              fv.zaraz._n = "06c5b6cb-91f4-407c-8030-62944da1011e";
              fv.zaraz.q = [];
              fv.zaraz._f = function (fz) {
                return async function () {
                  var fA = Array.prototype.slice.call(arguments);
                  fv.zaraz.q.push({ m: fz, a: fA });
                };
              };
              for (const fB of ["track", "set", "debug"])
                fv.zaraz[fB] = fv.zaraz._f(fB);
              fv.zaraz.init = () => {
                var fC = fw.getElementsByTagName(fy)[0],
                  fD = fw.createElement(fy),
                  fE = fw.getElementsByTagName("title")[0];
                fE && (fv[fx].t = fw.getElementsByTagName("title")[0].text);
                fv[fx].x = Math.random();
                fv[fx].w = fv.screen.width;
                fv[fx].h = fv.screen.height;
                fv[fx].j = fv.innerHeight;
                fv[fx].e = fv.innerWidth;
                fv[fx].l = fv.location.href;
                fv[fx].r = fw.referrer;
                fv[fx].k = fv.screen.colorDepth;
                fv[fx].n = fw.characterSet;
                fv[fx].o = new Date().getTimezoneOffset();
                if (fv.dataLayer)
                  for (const fF of Object.entries(
                    Object.entries(dataLayer).reduce(
                      (fG, fH) => ({ ...fG[1], ...fH[1] }),
                      {}
                    )
                  ))
                    zaraz.set(fF[0], fF[1], { scope: "page" });
                fv[fx].q = [];
                for (; fv.zaraz.q.length; ) {
                  const fI = fv.zaraz.q.shift();
                  fv[fx].q.push(fI);
                }
                fD.defer = !0;
                for (const fJ of [localStorage, sessionStorage])
                  Object.keys(fJ || {})
                    .filter((fL) => fL.startsWith("_zaraz_"))
                    .forEach((fK) => {
                      try {
                        fv[fx]["z_" + fK.slice(7)] = JSON.parse(fJ.getItem(fK));
                      } catch {
                        fv[fx]["z_" + fK.slice(7)] = fJ.getItem(fK);
                      }
                    });
                fD.referrerPolicy = "origin";
                fD.src =
                  "/cdn-cgi/zaraz/s.js?z=" +
                  btoa(encodeURIComponent(JSON.stringify(fv[fx])));
                fC.parentNode.insertBefore(fD, fC);
              };
              ["complete", "interactive"].includes(fw.readyState)
                ? zaraz.init()
                : fv.addEventListener("DOMContentLoaded", zaraz.init);
            }
          })(w, d, "zarazData", "script");
          window.zaraz._p = async (eC) =>
            new Promise((eD) => {
              if (eC) {
                eC.e &&
                  eC.e.forEach((eE) => {
                    try {
                      const eF = d.querySelector("script[nonce]"),
                        eG = eF?.nonce || eF?.getAttribute("nonce"),
                        eH = d.createElement("script");
                      eG && (eH.nonce = eG);
                      eH.innerHTML = eE;
                      eH.onload = () => {
                        d.head.removeChild(eH);
                      };
                      d.head.appendChild(eH);
                    } catch (eI) {
                      console.error(`Error executing script: ${eE}\n`, eI);
                    }
                  });
                Promise.allSettled(
                  (eC.f || []).map((eJ) => fetch(eJ[0], eJ[1]))
                );
              }
              eD();
            });
          zaraz._p({ e: ["(function(w,d){})(window,document)"] });
        })(window, document);
      } catch (e) {
        throw (fetch("/cdn-cgi/zaraz/t"), e);
      }
    </script>
    <script>
      (function (w, d) {})(window, document);
    </script>
    <script>
      (function (w, d) {
        w.zarazData.executed.push("Pageview");
      })(window, document);
    </script>
    <script>
      (function (w, d) {})(window, document);
    </script>
    {% endblock %}
    
    {% block content %}

    <div class="login-box">
      <div class="login-logo">Student Login</div>
      <!-- /.login-logo -->
      <div class="card">
        <div class="card-body login-card-body">
          <p class="login-box-msg">
            Enter your registered email to set a new password
          </p>
          {% if messages%}
              {%for message in messages%}
                  <div class="alert alert-danger" style = "color: #721c24;
                   background-color: #f8d7da;
                   border: 1px solid #f5c6cb;
                   padding: 10px;
                   margin-bottom: 10px;
                   border-radius: 4px;
                   font-weight: bold;">{{ message }}</div>
              {% endfor %}
          {% endif %}
          <form method="post">
            {% csrf_token %}
            <div class="input-group mb-3">
              <input type="email" name = "email" class="form-control" placeholder="Email" />
              <div class="input-group-append">
                <div class="input-group-text">
                  <span class="fas fa-envelope"></span>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-12" style = "display:flex; justify-content:center; margin-bottom:5px;">
                <button type="submit" class="btn btn-primary btn-block">
                  Request new password
                </button>
              </div>
              <!-- /.col -->
            </div>
          </form>

          <p class="mt-3 mb-1">
            <a href="{% url "student login"%}">Login</a>
          </p>
          <p class="mb-0">
            <a href="{% url "student registration"%}" class="text-center"
              >Register a new student</a
            >
          </p>
        </div>
        <!-- /.login-card-body -->
      </div>
    </div>
    <!-- /.login-box -->
     {% endblock %}

     {% block jquery %}
    <!-- jQuery -->
    <script src="../../plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="../../dist/js/adminlte.min.js?v=3.2.0"></script>
    <script
      defer=""
      src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"
      integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ=="
      data-cf-beacon='{"rayId":"95ea92f548baa756","serverTiming":{"name":{"cfExtPri":true,"cfEdge":true,"cfOrigin":true,"cfL4":true,"cfSpeedBrain":true,"cfCacheStatus":true}},"version":"2025.6.2","token":"2437d112162f4ec4b63c3ca0eb38fb20"}'
      crossorigin="anonymous"
    ></script>
      {% endblock %}

